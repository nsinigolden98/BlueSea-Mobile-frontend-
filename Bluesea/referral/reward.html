<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VTU C-Mobile â€” Reward & Referral Center</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="app">
    <!-- SECTION 1: HEADER -->
    <header class="header">
      <div class="brand">
        <div class="app-name">VTU C-Mobile</div>
        <div class="subtitle">Reward & Referral Center</div>
      </div>
    </header>

    <!-- SECTION 2: REWARD STATUS CARD -->
    <section class="card status-card" id="statusCard" aria-live="polite">
      <div class="status-top">
        <div class="status-title" id="statusTitle">Cash Invite Mode</div>
        <div class="status-sub" id="statusSub">â‚¦500 per valid invite</div>
      </div>

      <div class="progress-wrap" id="progressWrap" aria-hidden="true">
        <div class="progress-info">
          <div class="progress-left"><strong id="gbEarned">0GB</strong> earned</div>
          <div class="progress-right"><span id="gbRemaining">50GB</span> remaining</div>
        </div>
        <div class="progress-bar-outer" role="progressbar" aria-valuemin="0" aria-valuemax="50" aria-valuenow="0">
          <div id="progressBar" class="progress-bar"></div>
        </div>
        <div class="next-action" id="nextAction">You are 2 invites away from unlocking your next reward</div>
      </div>

      <div class="status-extras">
        <div id="streakBadge" class="streak-badge" aria-hidden="true">
          <!-- inline SVG streak icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 2l2.9 5.88L21 9.24l-4.5 4.38L17.8 21 12 17.77 6.2 21l1.3-7.38L3 9.24l6.1-1.36L12 2z" fill="#0b66ff"/></svg>
          <span id="streakCount">0</span> day streak
        </div>
        <div id="communityBoost" class="community-boost muted" aria-hidden="true">
          <!-- inline SVG community icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 12a5 5 0 100-10 5 5 0 000 10zM4 20a8 8 0 0116 0H4z" fill="#0b66ff"/></svg>
          Community Boost Active
        </div>
      </div>
      <div class="momentum" id="momentum">Keep inviting to unlock more data</div>
    </section>

    <!-- SECTION 3: WAITLIST VERIFICATION (IMAGE-BASED) -->
    <section class="card verify-card" id="verifyCard">
      <h2 class="section-title">Upload Your Waitlist QR Code</h2>
      <form id="qrForm" class="qr-form" novalidate>
        <label class="file-label" for="qrImage">Choose image (PNG, JPG) or paste image</label>
        <input id="qrImage" name="qrImage" type="file" accept="image/*" />
        <div class="image-preview" id="imagePreview" aria-hidden="true"></div>
        <div class="verify-actions">
          <button type="button" id="verifyImageBtn" class="btn primary">Verify</button>
        </div>
        <div id="verifyMessage" class="verify-message" aria-live="polite"></div>
      </form>

      <!-- Identity selection appears after verification and before hiding this section -->
      <div id="identitySelect" class="identity-select hidden" aria-hidden="true">
        <div class="identity-title">Choose your reward identity</div>
        <div class="identity-options">
          <button class="identity-btn" data-id="speed">
            <div class="icon" aria-hidden="true">
              <!-- rocket SVG -->
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M12 2l3 6 6 3-6 3-3 6-3-6-6-3 6-3 3-6z" fill="#0b66ff"/></svg>
            </div>
            <div class="label">ðŸš€ Speed Runner</div>
            <div class="desc">Faster GB unlocks, no cash</div>
          </button>

          <button class="identity-btn" data-id="value">
            <div class="icon" aria-hidden="true">
              <!-- gem SVG -->
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M12 2l9 7-3 13H6L3 9l9-7z" fill="#0b66ff"/></svg>
            </div>
            <div class="label">ðŸ’Ž Value Builder</div>
            <div class="desc">Slower GB, higher cash bonus later</div>
          </button>

          <button class="identity-btn" data-id="influencer">
            <div class="icon" aria-hidden="true">
              <!-- brain SVG -->
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none"><path d="M12 2a7 7 0 00-7 7v1H4v2h1v1a7 7 0 007 7 7 7 0 007-7v-1h1v-2h-1V9a7 7 0 00-7-7z" fill="#0b66ff"/></svg>
            </div>
            <div class="label">ðŸ§  Influencer Path</div>
            <div class="desc">Bonus perks and badges</div>
          </button>
        </div>
      </div>
    </section>

    <!-- SECTION 4: PHONE NUMBER FOR DATA -->
    <section class="card phone-card" id="phoneCard">
      <h3 class="section-title small">Phone Number for Data Delivery</h3>
      <div class="phone-row">
        <label for="phoneInput" class="label">Phone number</label>
        <input id="phoneInput" type="tel" inputmode="tel" placeholder="+234 800 000 0000" />
      </div>
      <div class="checkbox-row">
        <input id="useRegPhone" type="checkbox" />
        <label for="useRegPhone" class="label muted">Use my registration phone number</label>
      </div>
      <div class="redeem-row">
        <button id="redeemBtn" class="btn primary" disabled>Redeem Available Data</button>
        <div id="redeemMsg" class="muted small" aria-live="polite"></div>
      </div>
    </section>

    <!-- Collapsible summary shown after full claim -->
    <section class="card claimed-summary hidden" id="claimedSummary">
      <div class="summary-header" id="summaryHeader">
        <div class="summary-title">Claimed Rewards Summary</div>
        <button id="summaryToggle" class="btn">â–¼</button>
      </div>
      <div id="summaryBody" class="summary-body hidden">
        <div id="claimedList" class="muted small"></div>
      </div>
    </section>

    <!-- SECTION 5: REWARD TIMELINE (VISUAL) -->
    <section class="card timeline-card" id="timelineCard">
      <h3 class="section-title">Reward Timeline</h3>
      <div id="timeline" class="timeline" aria-hidden="false">
        <!-- Steps rendered by JS -->
      </div>
    </section>

    <!-- SECTION 6: INVITE & REFERRAL SYSTEM -->
    <section class="card invite-card" id="inviteCard">
      <h3 class="section-title">Invite & Referral</h3>
      <div class="invite-code-row">
        <div class="invite-code" id="inviteCode">â€”</div>
        <button id="copyCodeBtn" class="btn">Copy</button>
      </div>

      <div class="simulate-controls">
        <button id="simulateInviteBtn" class="btn">Simulate Invite</button>
        <button id="simulateValidBtn" class="btn">Simulate Valid Invite</button>
        <button id="simulateInvalidBtn" class="btn">Simulate Invalid Invite</button>
        <button id="simulateStreakBtn" class="btn">Simulate Next Day (Streak)</button>
        <button id="simulateCommunityBtn" class="btn">Trigger Community Boost</button>
      </div>

      <div class="invite-stats">
        <div class="stat">
          <div class="stat-label">Total invites</div>
          <div id="totalInvites" class="stat-value">0</div>
        </div>
        <div class="stat">
          <div class="stat-label">Valid invites</div>
          <div id="validInvites" class="stat-value">0</div>
        </div>
        <div class="stat">
          <div class="stat-label">To next unlock</div>
          <div id="toNext" class="stat-value">2</div>
        </div>
      </div>

      <div id="pendingInvites" class="pending-list muted small" aria-live="polite"></div>

      <div id="qualityLegend" class="quality-legend muted small">
        <strong>Invite Quality:</strong> Pending â€¢ Registered â€¢ Transacted â€¢ Matured
      </div>
    </section>

    <!-- SECTION 7: TRANSPARENCY & TRUST -->
    <section class="card rules-card" id="rulesCard">
      <h3 class="section-title">Transparency & Trust</h3>
      <p class="muted small">
        Data rewards are capped at 50GB. While in waitlist data mode, cash rewards are locked. Only validated invites count toward data unlocks. No hidden deductions. Anti-fraud checks apply. All simulations are for demo/testing.
      </p>
    </section>
  </main>

  <script src="rewardLogic.js"></script>
  <script src="https://unpkg.com/jsqr/dist/jsQR.js"></script>
  <script src="rewardUI.js"></script>
  <script src="rewardUI2.js"></script>
</body>
</html>