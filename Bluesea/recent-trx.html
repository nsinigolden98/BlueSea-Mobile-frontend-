<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title> Recent Transactions</title>
    <link rel="stylesheet" href="loader.css">
    <style>
    :root{
    --dash-radius: 14px;
  --dash-font: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --dash-panel-width: 260px;
  --dash-bg: #f6f8fa;
  --dash-panel: #ffffff;
  --dash-card-muted: #ffffff;
  --dash_muted_card: #f4f7f9;   
  --dash-accent: #0b84ff;
  --dash-accent-2: #066fb7;
  --dash-text: #0b2130;
  --dash-text-muted: #6b7b84;
  --dash-action-text: var(--dash-text);
  --dash-muted-2: #e6edf0;
  --dash-red: #c62828;
  --dash-loader-bg: rgba(255,255,255,0.6);
  --dash-loader-panel: #ffffff;
  --dash-loader-text: #024156;
  --dash-error-panel: #fff0f0;
  --dash-error-accent: #c62828;
  }
        /* Transactions */
    body{
        font-size: 12px;
    }
    tr{
        border-bottom:2px solid var(--dash-accent-2);
    }
.transactions_card{margin-top:12px;background:var(--dash-card-muted);padding:22px;border-radius:18px}
.transactions_header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.transactions_title{margin:0;font-size:18px;font-weight:700}
.transactions_viewall{color:var(--dash-accent-2);font-size:13px;text-decoration:none;font-weight:600}
.transactions_table{width:100%;border-collapse:collapse;table-layout:fixed}
.transactions_table thead th{text-align:left;font-size:12px;color:var(--dash-text-muted);padding:12px 8px;font-weight:600}
.transactions_table tbody tr{border-top:1px solid rgba(255,255,255,0.03)}
.transactions_table tbody td{padding:14px 8px; color:var(--dash-text)}
.th_desc{width:40%}
.th_date{width:35%}
.th_amount{width:25%;text-align:right}
.amount--debit{color:var(--dash-red);font-weight:700;text-align:right}


    </style>
</head>
<body>
     <section class="transactions" >
              <div class="transactions_card">
                <div class="transactions_header">
                  <h4 class="transactions_title">Recent Transactions</h4>
                  <a class="transactions_viewall" onclick="window.parent.location.href='transactions/transactions.html'" id="view_all">View All</a>
                </div>
                
                <div id="result"></div>

                <table class="transactions_table" role="table" aria-label="Recent transactions">
                  <thead>
                    <tr>
                      <th class="th_desc">Description</th>
                      <th class="th_date">Date</th>
                      <th class="th_amount">Amount</th>
                    </tr>
                  </thead>
                  <tbody id="transactions_body">

                  </tbody>
                </table>
              </div>
            </section>
            <iframe src="loader.html" frameborder="0" id='loader'></iframe>
            <script src="side-nav.js"></script>
    <script >  
    async function getTansactionHistory() {
    
    showLoader()
    const histories = await getRequest(`${ENDPOINTS.history}?page=1`);
    const history =  histories.results
    let count = histories.count
    
    let tbody = document.getElementById("transactions_body");
  //  tbody.innerHTML = '';
    for(let i = 0; i<= 5; i++){
        let  description = history[i].description
        let  time = getDate(history[i].created_at.slice(0,10))
        let  amount =  history[i].formatted_amount
        if(history[i].transaction_type ==='DEBIT'){
             amount = "-" + amount;
        }
        else{
             amount = "+" + amount;
        }
        
        const cellOne = document.createElement('td')
        const cellTwo = document.createElement('td')
        const cellThree = document.createElement('td')
        
        cellOne.textContent = description 
        cellTwo.textContent = time
        cellThree.textContent = amount
        
        const row = document.createElement('tr')
        row.appendChild(cellOne);
        row.appendChild(cellTwo);
        row.appendChild(cellThree);
        tbody.appendChild(row);
        hideLoader()
    }
    
}
getTansactionHistory();
            </script>

</body>
</html>